(this["webpackJsonpco-branding-web-app"]=this["webpackJsonpco-branding-web-app"]||[]).push([[22],{473:function(e,t,n){},512:function(e,t,n){"use strict";n.r(t);var a=n(14),o=n(2),c=n(92),l=(n(473),n(119)),r=n(5),s=n(102),i=n(88),d=n(16),u=n(99),m=n(94),p=n(18),j=n.n(p),b=n(207),g=n.n(b),h=n(1);t.default=Object(d.b)((function(e){return console.log(e.auth.isLoading),{isLoading:e.auth.isLoading}}),(function(e){return{onEditContent:function(t,n,a,o,c,l,r,i,d,u,m){return e(Object(s.e)(t,n,a,o,c,l,r,i,d,u,m))}}}))((function(e){var t=e.onEditContent,n=e.isLoading,s=Object(o.useState)(!0),d=Object(a.a)(s,2),p=d[0],b=d[1],O=Object(o.useState)(),f=Object(a.a)(O,2),x=f[0],T=f[1],y=Object(o.useState)(),N=Object(a.a)(y,2),_=N[0],S=N[1],v=Object(o.useState)(),C=Object(a.a)(v,2),E=C[0],B=C[1],D=Object(o.useState)(""),I=Object(a.a)(D,2),L=I[0],P=I[1],w=Object(o.useState)(g.a.createEmptyValue()),V=Object(a.a)(w,2),U=V[0],k=V[1],R=Object(o.useState)(g.a.createEmptyValue()),F=Object(a.a)(R,2),H=F[0],Y=F[1],K={display:["INLINE_STYLE_BUTTONS","BLOCK_TYPE_BUTTONS","BLOCK_TYPE_DROPDOWN","HISTORY_BUTTONS"],INLINE_STYLE_BUTTONS:[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Strikethrough",style:"STRIKETHROUGH"}],BLOCK_TYPE_DROPDOWN:[{label:"Normal",style:"unstyled"},{label:"Heading Large",style:"header-one"},{label:"Heading Medium",style:"header-two"},{label:"Heading Small",style:"header-three"}],BLOCK_TYPE_BUTTONS:[{label:"Unordered List",style:"unordered-list-item"},{label:"Ordered List",style:"ordered-list-item"},{label:"Blockquote",style:"blockquote"}]},A=Object(r.g)(),M=JSON.parse(localStorage.getItem("userData")).email,J=localStorage.getItem("contentSelected"),q={whereKeyValues:{cobrandEmail:M}};return Object(o.useEffect)((function(){if(b(!0),console.log(J),J){var e={whereKeyValues:{cobrandEmail:M,_id:J}};j()({method:"post",url:"https://rk.defghi.biz.id:8080/api/cobrand/contentFilter",data:e,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Response data: ",e.data),S(e.data.contents[0]);var t=(new DOMParser).parseFromString(e.data.contents[0].contents,"text/html");if(console.log(t),"Artikel"===e.data.contents[0].contentType){var n=t.getElementById("contents");Y(g.a.createValueFromString(n.outerHTML,"html")),P(n.outerHTML)}else if("Image"===e.data.contents[0].contentType){var a=t.getElementsByTagName("img")[0].toString();P(a.src)}else if("Video"===e.data.contents[0].contentType){var o=t.getElementsByTagName("iframe")[0];P(o.src)}else if("Pdf"===e.data.contents[0].contentType){var c=t.getElementsByTagName("iframe")[0].src;c.includes("&embedded=true")&&(c=c.replace("&embedded=true","")),c.includes("http://docs.google.com/gview?url=")&&(c=c.replace("http://docs.google.com/gview?url=","")),P(c)}var l=e.data.contents[0].startDate.split("T")[0];console.log(l),B(l),j()({method:"post",url:"https://rk.defghi.biz.id:8080/api/cobrand/programFilter",data:q,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Program list: ",e.data),T(e.data.programs),b(!1)})).catch((function(e){console.log(e),b(!1)}))})).catch((function(e){console.log(e),b(!1)}))}}),[]),p?Object(h.jsx)(i.a,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(c.a,{headingName:"Content",routes:[{path:"/content",name:"Content"},{path:"/content/edit",name:"Edit Selected content"}]}),Object(h.jsx)(l.a,{initialValues:{programId:_.programId,contentName:_.contentName,contentDescription:_.contentDescription,contentType:_.contentType,contentSource:_.contentSource,contents:L,startDate:E},validationSchema:u.b,validateOnChange:!0,onSubmit:function(e){t(J,M,e.programId,e.contentName,e.contentDescription,e.contentType,e.contentSource,"",e.contents,e.startDate,A)},children:function(e){var t=e.handleChange,n=e.handleSubmit,a=e.handleBlur,o=e.setFieldValue,c=e.values,l=e.errors,r=e.touched;return Object(h.jsx)("form",{onSubmit:n,children:Object(h.jsxs)("div",{className:"EditContent",children:[Object(h.jsxs)("h1",{children:["Edit Selected Content: ",_.contentName]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Content Type"}),Object(h.jsxs)("select",{name:"contentType",value:c.contentType,onChange:function(e){o("contentType",e.currentTarget.value),o("contents","")},children:[Object(h.jsx)("option",{value:"",disabled:!0,children:"Select Content Type"}),Object(h.jsx)("option",{value:"Artikel",children:"Artikel"}),Object(h.jsx)("option",{value:"Image",children:"Image"}),Object(h.jsx)("option",{value:"Video",children:"Video"}),Object(h.jsx)("option",{value:"Pdf",children:"File Pdf"})]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Program Name"}),Object(h.jsxs)("select",{name:"programId",value:c.programId,onChange:t,children:[Object(h.jsx)("option",{value:"",disabled:!0,children:"Select Program"}),x?x.map((function(e){return Object(h.jsx)("option",{value:e._id,children:e.programName})})):null]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Title"}),Object(h.jsx)(m.a,{type:"text",name:"contentName",className:"form-group__input form-group__input--fullwidth",placeholder:"Example",value:c.contentName,onChange:t,onBlur:a}),r.contentName&&Object(h.jsx)("span",{className:"message__error",children:l.contentName})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)(g.a,{name:"contentDescription",placeholder:"Type your contents here...",className:"form-group_rte",value:U,toolbarConfig:K,onBlur:a,onChange:function(e){k(e),o("contentDescription",e.toString("html")),console.log(c.contentDescription)}}),r.contentDescription&&Object(h.jsx)("span",{className:"message__error",children:l.contentDescription})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Source"}),Object(h.jsx)(m.a,{type:"text",name:"contentSource",className:"form-group__input form-group__input--fullwidth",placeholder:"Example",value:c.contentSource,onChange:t,onBlur:a}),r.contentSource&&Object(h.jsx)("span",{className:"message__error",children:l.contentSource})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Photo"}),Object(h.jsx)("img",{className:"photo",src:_.contentThumbnail}),Object(h.jsx)("br",{}),Object(h.jsx)(m.a,{type:"file",className:"form-group__input",name:"contentThumbnail",onBlur:a,onChange:function(e){var t=e.currentTarget.files[0];t&&(console.log("File to upload: ",t),o("contentThumbnail",t))}})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Contents"}),"Artikel"===c.contentType?Object(h.jsx)(g.a,{name:"contents",placeholder:"Type your contents here...",className:"form-group_rte",value:H,toolbarConfig:K,onBlur:a,onChange:function(e){Y(e),o("contents",e.toString("html")),console.log(c.contents)}}):null,"Image"===c.contentType?Object(h.jsx)(m.a,{type:"file",className:"form-group__input",name:"contents",onBlur:a,value:c.contents,onChange:t}):null,"Video"===c.contentType?Object(h.jsx)(m.a,{type:"text",name:"contents",className:"form-group__input form-group__input--fullwidth",placeholder:"Type Video URL... (Youtube/Vimeo/Dailymotion/etc)",value:c.contents,onChange:t,onBlur:a}):null,"Pdf"===c.contentType?Object(h.jsx)(m.a,{type:"text",name:"contents",className:"form-group__input form-group__input--fullwidth",placeholder:"Type Pdf URL... (just for pdf file)",value:c.contents,onChange:t,onBlur:a}):null,r.contents&&Object(h.jsx)("span",{className:"message__error",children:l.contents})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Set Schedule"}),Object(h.jsx)(m.a,{type:"date",className:"form-group__input",name:"startDate",value:c.startDate,min:(new Date).toISOString().split("T")[0],onChange:t,onBlur:a}),r.startDate&&Object(h.jsx)("span",{className:"message__error",children:l.startDate})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"btn btn-submit",type:"submit",children:"Update Content"})})]})})}}),n?Object(h.jsx)(i.a,{}):null]})}))}}]);
//# sourceMappingURL=22.6b1cfa99.chunk.js.map