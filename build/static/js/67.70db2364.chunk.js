(this["webpackJsonpco-branding-web-app"]=this["webpackJsonpco-branding-web-app"]||[]).push([[67],{106:function(e,a,t){},108:function(e,a,t){"use strict";var c=t(2),i=(t(109),t(0));function n(e){var a=e.placeholder,t=e.type,c=e.onChange,n=e.onBlur,l=e.value,s=e.className,o=e.message,d=e.name,r=e.min,u=e.max,m=e.disabled,p=e.isError;return"textarea"===t?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("textarea",{name:d,id:d,className:s,placeholder:a,onChange:c,onBlur:n,value:l,disabled:m}),p&&Object(i.jsx)("div",{className:"message",children:Object(i.jsx)("span",{className:"message__error",children:o})})]}):"date"===t||"datetime-local"===t?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{name:d,className:s,type:t,placeholder:a,onChange:c,onBlur:n,value:l,min:r,max:"9999-12-31",disabled:m}),p&&Object(i.jsx)("div",{className:"message",children:Object(i.jsx)("span",{className:"message__error",children:o})})]}):"number"===t?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{name:d,className:s,type:t,onChange:c,onBlur:n,value:l,min:r,max:u,disabled:m}),p&&Object(i.jsx)("div",{className:"message",children:Object(i.jsx)("span",{className:"message__error",children:o})})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{name:d,className:s,type:t,placeholder:a,onChange:c,onBlur:n,value:l,disabled:m}),p&&Object(i.jsx)("div",{className:"message",children:Object(i.jsx)("span",{className:"message__error",children:o})})]})}a.a=Object(c.memo)(n)},109:function(e,a,t){},1332:function(e,a,t){},1504:function(e,a,t){"use strict";t.r(a);var c=t(7),i=t(2),n=t(97),l=(t(1332),t(106),t(660)),s=t.n(l),o=t(144),d=t(6),r=t(99),u=t(125),m=t(35),p=t(17),j=t(108),h=(t(37),t(0));a.default=Object(p.b)((function(e){return{isLoading:e.auth.isLoading}}),(function(e){return{onChildControl:function(a,t,c,i,n,l,s,o){return e(Object(u.o)(a,t,c,i,n,l,s,o))}}}))((function(e){var a=e.onChildControl,t=e.isLoading,l=Object(d.g)(),u=(JSON.parse(localStorage.getItem("userData")).cobrandEmail,localStorage.getItem("userNameSelected")),p=localStorage.getItem("userSelected"),b=Object(i.useState)(!0),g=Object(c.a)(b,2),O=g[0],v=g[1],x=Object(i.useState)(!1),k=Object(c.a)(x,2),S=k[0],f=k[1],C=Object(i.useState)([]),N=Object(c.a)(C,2),B=N[0],L=N[1],y=Object(i.useState)("normal"),_=Object(c.a)(y,2),w=_[0],D=_[1],T=Object(i.useState)(!1),U=Object(c.a)(T,2),A=U[0],H=U[1],I=Object(i.useState)([]),E=Object(c.a)(I,2),J=E[0],P=E[1],F=Object(i.useState)(0),M=Object(c.a)(F,2),K=(M[0],M[1],Object(i.useState)("")),R=Object(c.a)(K,2),V=R[0],W=R[1];return Object(i.useEffect)((function(){var e={whereKeyValues:{emailUser:p}},a=Object(r.z)(e),t=Object(r.p)(e),c=Object(r.e)(e),i=Object(r.q)(e);Promise.all([a,c,i,t]).then((function(e){var a,t;console.log(e[0]),console.log(e[1]),console.log(e[2]),console.log(e[3]);var c=(null!==(a=e[0].data.appdevices)&&void 0!==a?a:[]).length>0?e[0].data.appdevices[0].appName:[];c.sort((function(e,a){return e.appName>a.appName?1:a.appName>e.appName?-1:0}));for(var i=null!==(t=e[1].data.appUsageLimit)&&void 0!==t?t:[],n=[],l=0;l<c.length;l++){for(var s=0,o=0,d="",r=0;r<i.length&&0===s;r++)i[r].appId===c[l].packageId&&(0===i[r].limit&&"blacklist"===i[r].status?s=1:"Aktif"===i[r].status&&(s=2),o=i[r].limit,d=i[r]._id);var u={_id:d,appName:c[l].appName,appCategory:c[l].appCategory,packageId:c[l].packageId,mode:s.toString(),limit:o,isChanged:!1};n.push(u)}console.log(n),L(n);var m=e[2].data.childModeAsuhs;m.length>0&&(D(m[0].modeAsuhName),H(!0));var p=e[3].data.deviceUsageSchedules,j=[];for(l=0;l<p.length;l++)"harian"===p[l].scheduleType&&j.push(p[l]);console.log(j),P(j),setTimeout((function(){console.log(B),v(!1),v(!0),v(!1)}),2e3)}))}),[S]),t||O?Object(h.jsx)(m.a,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(n.a,{headingName:"Kontrol Anak: "+u,routes:[{path:"/cms/user",name:"Pengguna"},{path:"/cms/user/child-control",name:"Kontrol Anak"}]}),Object(h.jsx)(o.a,{initialValues:{appLimitBlock:B.slice(),modeAsuhSelected:w,deviceSchedule:J.slice()},onSubmit:function(e){a(p,A,e.appLimitBlock,e.modeAsuhSelected,e.deviceSchedule,f,v,l)},children:function(e){e.handleChange;var a=e.handleSubmit,t=(e.handleBlur,e.setFieldValue),c=e.values;e.errors,e.touched;return Object(h.jsx)("form",{onSubmit:a,children:Object(h.jsxs)("div",{className:"ChildControl",children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Mode Asuh"}),Object(h.jsxs)("select",{value:c.modeAsuhSelected,onChange:function(e){t("modeAsuhSelected",e.currentTarget.value),D(e.currentTarget.value)},children:[Object(h.jsx)("option",{value:"normal",children:"Normal"}),Object(h.jsx)("option",{value:"diawasi",children:"Diawasi"}),Object(h.jsx)("option",{value:"dihukum",children:"Dihukum"})]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Blokir dan Batasi Penggunaan Aplikasi"}),Object(h.jsx)("input",{type:"text",className:"table_props_input",placeholder:"Search",value:V,onChange:function(e){W(e.currentTarget.value)}}),Object(h.jsxs)("table",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Nama Aplikasi"}),Object(h.jsx)("th",{children:"Status Blokir"}),Object(h.jsx)("th",{children:"Limit Penggunaan (Menit)"})]}),c.appLimitBlock.map((function(e,a){if(e.appName.toLowerCase().includes(V.toLowerCase()))return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.appName}),Object(h.jsxs)("td",{onChange:function(e){console.log(e),console.log(c.appLimitBlock[a].mode),t("appLimitBlock.".concat(a,".mode"),e.target.value),t("appLimitBlock.".concat(a,".isChanged"),!0),"2"===e.target.value&&t("appLimitBlock.".concat(a,".limit"),1),console.log(c.appLimitBlock[a].mode)},children:[Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"radio",value:"1",name:"block_status_"+a.toString(),checked:"1"===c.appLimitBlock[a].mode||"dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory),disabled:"dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory)}),"Ya"]}),Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"radio",value:"0",name:"block_status_"+a.toString(),checked:"0"===c.appLimitBlock[a].mode&&!("dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory)),disabled:"dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory)}),"Tidak"]}),Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"radio",value:"2",name:"block_status_"+a.toString(),checked:"2"===c.appLimitBlock[a].mode&&!("dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory)),disabled:"dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory)}),"Pakai Limit Penggunaan"]})]}),Object(h.jsx)("td",{children:Object(h.jsx)(j.a,{name:"limit",className:"form-group__input",type:"number",value:c.appLimitBlock[a].limit,min:1,max:1440,disabled:"2"!==c.appLimitBlock[a].mode||"dihukum"===w||"diawasi"===w&&("social"===c.appLimitBlock[a].appCategory||"game"===c.appLimitBlock[a].appCategory),onChange:function(e){t("appLimitBlock.".concat(a,".isChanged"),!0),t("appLimitBlock.".concat(a,".limit"),e.target.value)}})})]})}))]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsxs)("label",{children:["Jadwal Pemblokiran ",Object(h.jsx)("span",{children:Object(h.jsx)("button",{type:"button",onClick:function(){var e=c.deviceSchedule;e.push({_id:"",scheduleName:"",scheduleDescription:"",scheduleType:"harian",deviceUsageDays:[],deviceUsageStartTime:"00:00",deviceUsageEndTime:"00:01",status:"aktif",willBeRemoved:!1}),t("deviceSchedule",e)},children:"Tambah Jadwal"})})]}),Object(h.jsxs)("table",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Nama Jadwal"}),Object(h.jsx)("th",{children:"Deskripsi"}),Object(h.jsx)("th",{children:"Harian/Terjadwal"}),Object(h.jsx)("th",{children:"Hari"}),Object(h.jsx)("th",{children:"Waktu Mulai"}),Object(h.jsx)("th",{children:"Waktu Selesai"}),Object(h.jsx)("th",{children:"Action"})]}),c.deviceSchedule.map((function(e,a){if(console.log(e),!e.willBeRemoved)return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Object(h.jsx)(j.a,{name:"scheduleName",className:"form-group__input",value:e.scheduleName,type:"text",onChange:function(e){t("deviceSchedule.".concat(a,".scheduleName"),e.target.value)}})}),Object(h.jsx)("td",{children:Object(h.jsx)(j.a,{name:"scheduleDescription",className:"form-group__input",value:e.scheduleDescription,type:"text",onChange:function(e){t("deviceSchedule.".concat(a,".scheduleDescription"),e.target.value)}})}),Object(h.jsx)("td",{children:Object(h.jsx)("select",{onChange:function(e){"harian"===e.target.value?(t("deviceSchedule.".concat(a,".deviceUsageStartTime"),"00:00"),t("deviceSchedule.".concat(a,".deviceUsageEndTime"),"00:01")):(console.log((new Date).toLocaleDateString("id-ID")),t("deviceSchedule.".concat(a,".deviceUsageStartTime"),(new Date).toLocaleDateString("id-ID")),t("deviceSchedule.".concat(a,".deviceUsageEndTime"),(new Date).toLocaleDateString("id-ID"))),t("deviceSchedule.".concat(a,".scheduleType"),e.target.value)},children:Object(h.jsx)("option",{value:"harian",children:"Harian"})})}),Object(h.jsx)("td",{children:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"].map((function(c){return Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"checkbox",name:c,value:c,checked:e.deviceUsageDays.includes(c),onChange:function(c){var i=e.deviceUsageDays,n=i.indexOf(c.target.value);n>=0?i.splice(n,1):i.push(c.target.value),t("deviceSchedule.".concat(a,".deviceUsageDays"),i)}}),c]})}))}),Object(h.jsx)("td",{children:Object(h.jsx)(s.a,{locale:"id-ID",format:"HH:mm",disableClock:!0,value:e.deviceUsageStartTime,onChange:function(e){t("deviceSchedule.".concat(a,".deviceUsageStartTime"),e)}})}),Object(h.jsx)("td",{children:Object(h.jsx)(s.a,{locale:"id-ID",format:"HH:mm",disableClock:!0,value:e.deviceUsageEndTime,onChange:function(e){t("deviceSchedule.".concat(a,".deviceUsageEndTime"),e)}})}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{type:"submit",onClick:function(){t("deviceSchedule.".concat(a,".willBeRemoved"),!0)},children:"Hapus"})})]})}))]})]}),Object(h.jsx)("button",{className:"btn btn-submit",type:"submit",children:"Simpan"})]})})}}),t?Object(h.jsx)(m.a,{}):null]})}))},97:function(e,a,t){"use strict";t(2);var c=t(8),i=(t(98),t(0));a.a=function(e){var a=e.headingName,t=e.routes,n=void 0===t?[]:t;return Object(i.jsxs)("div",{className:"Heading",children:[Object(i.jsx)("h1",{children:a}),Object(i.jsx)("ul",{className:"Heading__breadcumb",children:n.length>0&&n.map((function(e,a){return e.path?Object(i.jsxs)("li",{className:"Heading__breadcumb-item",children:[Object(i.jsx)(c.b,{exact:!0,to:e.path,children:e.name})," "]},a):Object(i.jsxs)("li",{className:"Heading__breadcumb-item",children:[" ",Object(i.jsx)("span",{children:e.name})," "]},a)}))})]})}},98:function(e,a,t){}}]);
//# sourceMappingURL=67.70db2364.chunk.js.map