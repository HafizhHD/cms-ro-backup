(this["webpackJsonpco-branding-web-app"]=this["webpackJsonpco-branding-web-app"]||[]).push([[60],{1364:function(e,t,n){"use strict";n.r(t);var o=n(9),a=n(2),c=n(95),r=(n(858),n(138)),s=n(6),l=n(121),i=n(36),u=n(17),d=n(120),m=n(113),p=n(18),j=n.n(p),b=n(349),g=n.n(b),h=n(220),O=n(179),f=(n(284),n(225)),x=n.n(f),v=(n(311),n(488)),N=n.n(v),y=n(0);t.default=Object(u.b)((function(e){return console.log(e.auth.isLoading),{isLoading:e.auth.isLoading}}),(function(e){return{onEditContent:function(t,n,o,a,c,r,s,i,u,d,m){return e(Object(l.m)(t,n,o,a,c,r,s,i,u,d,m))}}}))((function(e){var t=e.onEditContent,n=e.isLoading,l=O.EditorState.createEmpty(),u=Object(a.useState)(l),p=Object(o.a)(u,2),b=p[0],f=p[1],v=function(e){f(e)},T=Object(a.useState)(l),C=Object(o.a)(T,2),S=C[0],_=C[1],E=function(e){_(e)},w=Object(a.useState)(!0),k=Object(o.a)(w,2),B=k[0],D=k[1],A=Object(a.useState)(),I=Object(o.a)(A,2),V=(I[0],I[1]),F=Object(a.useState)(),L=Object(o.a)(F,2),M=L[0],P=L[1],H=Object(a.useState)(),R=Object(o.a)(H,2),U=R[0],J=R[1],K=Object(a.useState)(""),W=Object(o.a)(K,2),Y=W[0],q=W[1],z=Object(a.useState)(g.a.createEmptyValue()),G=Object(o.a)(z,2),Q=(G[0],G[1]),X=Object(a.useState)(g.a.createEmptyValue()),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.g)(),ne=JSON.parse(localStorage.getItem("userData")).email,oe=localStorage.getItem("contentSelected"),ae={whereKeyValues:{cobrandEmail:ne}};return Object(a.useEffect)((function(){if(D(!0),console.log(oe),oe){var e={whereKeyValues:{cobrandEmail:ne,_id:oe}};j()({method:"post",url:"https://as01.prod.ruangortu.id:8080/api/cobrand/contentFilter",data:e,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Response data: ",e.data),P(e.data.contents[0]);var t=(new DOMParser).parseFromString(e.data.contents[0].contents,"text/html");if(console.log(t),"Artikel"===e.data.contents[0].contentType){var n=t.getElementById("contents");console.log("Ini adalah con1 outer"+n.outerHTML),console.log("Ini adalah con1 inner"+n.innerHTML);var o=N()(n.innerHTML);ee(g.a.createValueFromString(n.outerHTML,"html")),q(n.outerHTML),_(O.EditorState.createWithContent(O.ContentState.createFromBlockArray(o.contentBlocks,o.entityMap)))}else if("Image"===e.data.contents[0].contentType){var a=t.getElementsByTagName("img")[0].toString();q(a.src)}else if("Video"===e.data.contents[0].contentType){var c=t.getElementsByTagName("iframe")[0];q(c.src)}else if("Pdf"===e.data.contents[0].contentType){var r=t.getElementsByTagName("iframe")[0].src;r.includes("&embedded=true")&&(r=r.replace("&embedded=true","")),r.includes("http://docs.google.com/gview?url=")&&(r=r.replace("http://docs.google.com/gview?url=","")),q(r)}var s=e.data.contents[0].contentDescription;console.log("des",s);var l=N()(s);f(O.EditorState.createWithContent(O.ContentState.createFromBlockArray(l.contentBlocks,l.entityMap)));var i=e.data.contents[0].startDate.split("T")[0];console.log(i),J(i),j()({method:"post",url:"https://as01.prod.ruangortu.id:8080/api/cobrand/programFilter",data:ae,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Program list: ",e.data),V(e.data.programs),D(!1)})).catch((function(e){console.log(e),D(!1)}))})).catch((function(e){console.log(e),D(!1)}))}}),[]),B?Object(y.jsx)(i.a,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(c.a,{headingName:"Artikel",routes:[{path:"/cms/content",name:"Artikel"},{path:"/cms/content/edit",name:"Ubah Artikel Terpilih"}]}),Object(y.jsx)(r.a,{initialValues:{programId:M.programId,contentName:M.contentName,contentDescription:b,contentType:M.contentType,contentSource:M.contentSource,contents:Y,startDate:U},validationSchema:d.c,validateOnChange:!0,onSubmit:function(e){t(oe,ne,e.programId,e.contentName,e.contentDescription,e.contentType,e.contentSource,e.contentThumbnail,e.contents,e.startDate,te)},children:function(e){var t=e.handleChange,n=e.handleSubmit,o=e.handleBlur,a=e.setFieldValue,c=e.values,r=e.errors,s=e.touched;return Object(y.jsx)("form",{onSubmit:n,children:Object(y.jsxs)("div",{className:"EditContent",children:[Object(y.jsxs)("h1",{children:["Ubah Artikel: ",M.contentName]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"Tipe Artikel"}),Object(y.jsxs)("select",{name:"contentType",value:c.contentType,onChange:function(e){a("contentType",e.currentTarget.value),a("contents","")},children:[Object(y.jsx)("option",{value:"",disabled:!0,children:"Select Content Type"}),Object(y.jsx)("option",{value:"Artikel",children:"Artikel"}),Object(y.jsx)("option",{value:"Image",children:"Image"}),Object(y.jsx)("option",{value:"Video",children:"Video"}),Object(y.jsx)("option",{value:"Pdf",children:"File Pdf"})]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"Judul"}),Object(y.jsx)(m.a,{type:"text",name:"contentName",className:"form-group__input form-group__input--fullwidth",placeholder:"Example",value:c.contentName,onChange:t,onBlur:o}),s.contentName&&Object(y.jsx)("span",{className:"message__error",children:r.contentName})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"Deskripsi"}),Object(y.jsx)(h.Editor,{editorState:b,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:v,values:c.contentDescription,name:"contentDescription",onChange:function(e){Q(c.contentDescription),a("contentDescription",x()(Object(O.convertToRaw)(b.getCurrentContent()))),console.log(b),console.log(c.contentDescription)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"Sumber"}),Object(y.jsx)(m.a,{type:"text",name:"contentSource",className:"form-group__input form-group__input--fullwidth",placeholder:"Example",value:c.contentSource,onChange:t,onBlur:o}),s.contentSource&&Object(y.jsx)("span",{className:"message__error",children:r.contentSource})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"Thumbnail"}),Object(y.jsx)("img",{className:"photo",src:M.contentThumbnail}),Object(y.jsx)("br",{}),Object(y.jsx)(m.a,{type:"file",className:"form-group__input",name:"contentThumbnail",onBlur:o,onChange:function(e){var t=e.currentTarget.files[0];t&&(console.log("File to upload: ",t),a("contentThumbnail",t))}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"Isi Artikel"}),"Artikel"===c.contentType?Object(y.jsx)(h.Editor,{editorState:S,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:E,values:c.contents,name:"contents",onChange:function(e){ee(c.contents),a("contents",x()(Object(O.convertToRaw)(S.getCurrentContent()))),console.log($),console.log(c.contents),console.log(S)}}):null,"Image"===c.contentType?Object(y.jsx)(m.a,{type:"file",className:"form-group__input",name:"contents",onBlur:o,onChange:function(e){var t=e.currentTarget.files[0];t&&(console.log("File to upload: ",t),a("contents",t))}}):null,"Video"===c.contentType?Object(y.jsx)(m.a,{type:"text",name:"contents",className:"form-group__input form-group__input--fullwidth",placeholder:"Type Video URL... (Youtube/Vimeo/Dailymotion/etc)",value:c.contents,onChange:t,onBlur:o}):null,"Pdf"===c.contentType?Object(y.jsx)(m.a,{type:"text",name:"contents",className:"form-group__input form-group__input--fullwidth",placeholder:"Type Pdf URL... (just for pdf file)",value:c.contents,onChange:t,onBlur:o}):null,s.contents&&Object(y.jsx)("span",{className:"message__error",children:r.contents})]}),Object(y.jsx)("div",{children:Object(y.jsx)("button",{className:"btn btn-submit",type:"submit",children:"Update Artikel"})})]})})}}),n?Object(y.jsx)(i.a,{}):null]})}))},858:function(e,t,n){}}]);
//# sourceMappingURL=60.a5e5c611.chunk.js.map