(this["webpackJsonpco-branding-web-app"]=this["webpackJsonpco-branding-web-app"]||[]).push([[61],{1362:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a(2),r=a(95),c=(a(852),a(138)),s=a(6),l=a(121),i=a(36),u=a(17),p=a(120),m=a(113),d=a(18),g=a.n(d),b=a(349),h=a.n(b),j=a(37),f=a(220),O=a(179),v=(a(284),a(225)),y=a.n(v),T=(a(311),a(488)),x=a.n(T),N=a(0);t.default=Object(u.b)((function(e){return console.log(e.auth.isLoading),{isLoading:e.auth.isLoading}}),(function(e){return{onEditStep:function(t,a,n,o,r,c,s,i){return e(Object(l.p)(t,a,n,o,r,c,s,i))}}}))((function(e){var t,a,l=e.onEditStep,u=e.isLoading,d=O.EditorState.createEmpty(),b=Object(o.useState)(d),v=Object(n.a)(b,2),T=(v[0],v[1]),C=Object(o.useState)(d),S=Object(n.a)(C,2),_=S[0],w=S[1],E=function(e){w(e)},B=function(e){var t=Object(j.a)(e);return console.log("Video embed ",t),t},k=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){console.log(n.result),t({data:{link:n.result}})},n.onerror=function(e){return a(e)}}))},L=Object(o.useState)(!0),V=Object(n.a)(L,2),F=V[0],I=V[1],K=Object(o.useState)(),M=Object(n.a)(K,2),P=(M[0],M[1]),U=Object(o.useState)(),R=Object(n.a)(U,2),A=R[0],D=R[1],J=Object(o.useState)(),H=Object(n.a)(J,2),W=(H[0],H[1]),Y=Object(o.useState)(""),q=Object(n.a)(Y,2),z=(q[0],q[1]),G=Object(o.useState)(h.a.createEmptyValue()),Q=Object(n.a)(G,2),X=(Q[0],Q[1],Object(o.useState)(h.a.createEmptyValue())),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.g)(),ae=JSON.parse(localStorage.getItem("userData")).email,ne=localStorage.getItem("stepSelected"),oe={whereKeyValues:{cobrandEmail:ae}};return Object(o.useEffect)((function(){if(I(!0),console.log(ne),ne){var e={whereKeyValues:{cobrandEmail:ae,_id:ne}};g()({method:"post",url:"https://as01.prod.ruangortu.id:8080/api/cobrand/contentFilter",data:e,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Response data: ",e.data),D(e.data.contents[0]);var t=(new DOMParser).parseFromString(e.data.contents[0].contents,"text/html");if(console.log(t),"Artikel"===e.data.contents[0].contentType){var a=t.getElementById("contents");console.log("Ini adalah con1 outer"+a.outerHTML),console.log("Ini adalah con1 inner"+a.innerHTML);var n=x()(a.innerHTML);ee(h.a.createValueFromString(a.outerHTML,"html")),z(a.outerHTML),w(O.EditorState.createWithContent(O.ContentState.createFromBlockArray(n.contentBlocks,n.entityMap)))}else if("Image"===e.data.contents[0].contentType){var o=t.getElementsByTagName("img")[0].toString();z(o.src)}else if("Video"===e.data.contents[0].contentType){var r=t.getElementsByTagName("iframe")[0];z(r.src)}else if("Pdf"===e.data.contents[0].contentType){var c=t.getElementsByTagName("iframe")[0].src;c.includes("&embedded=true")&&(c=c.replace("&embedded=true","")),c.includes("http://docs.google.com/gview?url=")&&(c=c.replace("http://docs.google.com/gview?url=","")),z(c)}var s=e.data.contents[0].contentDescription;console.log("des",s);var l=x()(s);T(O.EditorState.createWithContent(O.ContentState.createFromBlockArray(l.contentBlocks,l.entityMap)));var i=e.data.contents[0].startDate.split("T")[0];console.log(i),W(i),g()({method:"post",url:"https://as01.prod.ruangortu.id:8080/api/cobrand/programFilter",data:oe,headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Program list: ",e.data),P(e.data.programs),I(!1)})).catch((function(e){console.log(e),I(!1)}))})).catch((function(e){console.log(e),I(!1)}))}}),[]),F?Object(N.jsx)(i.a,{}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(r.a,{headingName:"Tahap",routes:[{path:"/cms/program/",name:"Program"},{path:"/cms/program/edit",name:"Ubah Program Terpilih"},{path:"/cms/program/edit/step",name:"Ubah Tahap Terpilih"}]}),Object(N.jsx)(c.a,{initialValues:{namaTahapan:A.namaTahapan,contentName:A.contentName,contentType:A.contentType,contents:_,response:null!==(t=Object.keys(A.respons))&&void 0!==t?t:[],answerKey:null!==(a=A.answerKey)&&void 0!==a?a:""},validationSchema:p.o,validateOnChange:!0,onSubmit:function(e){l(ne,ae,e.namaTahapan,e.contentName,e.contents,e.response,e.answerKey,te)},children:function(e){var t=e.handleChange,a=e.handleSubmit,n=e.handleBlur,o=e.setFieldValue,r=e.values,c=e.errors,s=e.touched;return Object(N.jsx)("form",{onSubmit:a,children:Object(N.jsxs)("div",{className:"EditContent",children:[Object(N.jsxs)("h1",{children:["Ubah Tahap: ",A.contentName]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Nama Tahap"}),Object(N.jsx)(m.a,{type:"text",name:"namaTahapan",className:"form-group__input form-group__input--fullwidth",placeholder:"Example",value:r.namaTahapan,onChange:t,onBlur:n}),s.namaTahapan&&Object(N.jsx)("span",{className:"message__error",children:c.namaTahapan})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Judul Tahap"}),Object(N.jsx)(m.a,{type:"text",name:"contentName",className:"form-group__input form-group__input--fullwidth",placeholder:"Example",value:r.contentName,onChange:t,onBlur:n}),s.contentName&&Object(N.jsx)("span",{className:"message__error",children:c.contentName})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Isi Tahap"}),"Artikel"===r.contentType?Object(N.jsx)(f.Editor,{editorState:_,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:E,values:r.contents,name:"contents",toolbar:{image:{uploadEnabled:!0,alignmentEnabled:!0,previewImage:!0,uploadCallback:k,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg"},embedded:{embedCallback:B}},onChange:function(e){ee(r.contents),o("contents",y()(Object(O.convertToRaw)(_.getCurrentContent()))),console.log($),console.log(r.contents),console.log(_)}}):null,"Image"===r.contentType?Object(N.jsx)(m.a,{type:"file",className:"form-group__input",name:"contents",onBlur:n,onChange:function(e){var t=e.currentTarget.files[0];t&&(console.log("File to upload: ",t),o("contents",t))}}):null,"Video"===r.contentType?Object(N.jsx)(m.a,{type:"text",name:"contents",className:"form-group__input form-group__input--fullwidth",placeholder:"Type Video URL... (Youtube/Vimeo/Dailymotion/etc)",value:r.contents,onChange:t,onBlur:n}):null,"Pdf"===r.contentType?Object(N.jsx)(m.a,{type:"text",name:"contents",className:"form-group__input form-group__input--fullwidth",placeholder:"Type Pdf URL... (just for pdf file)",value:r.contents,onChange:t,onBlur:n}):null,s.contents&&Object(N.jsx)("span",{className:"message__error",children:c.contents})]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Respon/Jawaban"}),r.response.map((function(e,t){return console.log("Content response:",e),Object(N.jsx)(m.a,{type:"text",name:"response",className:"form-group__input form-group__input--halfwidth",placeholder:"Example",value:e,onChange:function(e){o("response.".concat(t),e.currentTarget.value)},onBlur:n})}))]}),"Ujian"===localStorage.getItem("programCategory")?Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Kunci Jawaban"}),Object(N.jsx)("select",{name:"answerKey",value:r.answerKey,onChange:function(e){o("answerKey",e.currentTarget.value)},children:r.response.map((function(e){return Object(N.jsx)("option",{value:e,children:e})}))})]}):null,Object(N.jsx)("button",{className:"btn btn-submit",type:"submit",children:"Update Tahap"})]})]})})}}),u?Object(N.jsx)(i.a,{}):null]})}))},852:function(e,t,a){}}]);
//# sourceMappingURL=61.ae86da23.chunk.js.map